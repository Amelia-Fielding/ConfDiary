# ConfDiary - Anonymous Encrypted Diary

ConfDiaryæ˜¯ä¸€ä¸ªåŸºäºFHEVMï¼ˆFully Homomorphic Encryption Virtual Machineï¼‰çš„åŒ¿åæ—¥è®°åº”ç”¨ã€‚ç”¨æˆ·å¯ä»¥å°†æ—¥è®°å†…å®¹åŠ å¯†åå­˜å‚¨åœ¨é“¾ä¸Šï¼Œä½œè€…èº«ä»½ä¹Ÿé€šè¿‡åŠ å¯†æ–¹å¼éšè—ï¼Œåªæœ‰æœ¬äººèƒ½è§£å¯†æŸ¥çœ‹ã€‚

## ç‰¹æ€§

- ğŸ” **ç«¯åˆ°ç«¯åŠ å¯†**: ä½¿ç”¨FHEVMåŒæ€åŠ å¯†æŠ€æœ¯ï¼Œæ—¥è®°å†…å®¹åœ¨é“¾ä¸Šå®Œå…¨åŠ å¯†
- ğŸ‘¤ **åŒ¿åèº«ä»½**: ä½œè€…èº«ä»½åŠ å¯†å­˜å‚¨ï¼Œä¿æŠ¤éšç§
- ğŸŒ **å»ä¸­å¿ƒåŒ–**: æ— éœ€åç«¯æœåŠ¡ï¼Œå‰ç«¯ç›´æ¥ä¸æ™ºèƒ½åˆçº¦äº¤äº’
- ğŸ¨ **ç°ä»£UI**: é‡‡ç”¨æ¸å˜è‰²è®¾è®¡ï¼Œæ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜
- âš¡ **æœ¬åœ°å¼€å‘**: æ”¯æŒæœ¬åœ°FHEVM HardhatèŠ‚ç‚¹å¼€å‘

## é¡¹ç›®ç»“æ„

```
action/
â”œâ”€â”€ fhevm-hardhat-template/     # æ™ºèƒ½åˆçº¦é¡¹ç›®
â”‚   â”œâ”€â”€ contracts/
â”‚   â”‚   â””â”€â”€ ConfDiary.sol       # ä¸»åˆçº¦
â”‚   â”œâ”€â”€ deploy/                 # éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ test/                   # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ frontend/                   # å‰ç«¯é¡¹ç›®
    â”œâ”€â”€ app/                    # Next.jsåº”ç”¨
    â”œâ”€â”€ components/             # UIç»„ä»¶
    â”œâ”€â”€ fhevm/                  # FHEVMé›†æˆ
    â”œâ”€â”€ hooks/                  # React Hooks
    â””â”€â”€ scripts/                # å·¥å…·è„šæœ¬
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£…åˆçº¦ä¾èµ–
cd fhevm-hardhat-template
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd ../frontend
npm install
```

### 2. å¯åŠ¨æœ¬åœ°FHEVMèŠ‚ç‚¹

```bash
cd fhevm-hardhat-template
npm run node
```

### 3. éƒ¨ç½²åˆçº¦

```bash
# åœ¨æ–°ç»ˆç«¯ä¸­
cd fhevm-hardhat-template
npm run deploy:localhost
```

### 4. å¯åŠ¨å‰ç«¯

```bash
cd frontend
npm run dev:mock
```

### 5. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® [http://localhost:3000](http://localhost:3000)

## å¼€å‘æŒ‡å—

### æ™ºèƒ½åˆçº¦

ä¸»åˆçº¦ `ConfDiary.sol` æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

- `createDiaryEntry()`: åˆ›å»ºåŠ å¯†æ—¥è®°æ¡ç›®
- `getDiaryEntry()`: è·å–æŒ‡å®šæ—¥è®°æ¡ç›®
- `getUserEntries()`: è·å–ç”¨æˆ·çš„æ—¥è®°åˆ—è¡¨
- `getRecentEntries()`: è·å–æœ€è¿‘çš„å…¬å…±æ—¶é—´çº¿
- `deleteDiaryEntry()`: åˆ é™¤æ—¥è®°æ¡ç›®

### å‰ç«¯æ¶æ„

- **FHEVMé›†æˆ**: ä½¿ç”¨ `@fhevm/mock-utils` åœ¨æœ¬åœ°ç¯å¢ƒä¸­æ¨¡æ‹ŸFHEVMåŠŸèƒ½
- **çŠ¶æ€ç®¡ç†**: åŸºäºReact Hooksçš„çŠ¶æ€ç®¡ç†
- **UIç»„ä»¶**: ä½¿ç”¨Tailwind CSSæ„å»ºçš„ç°ä»£åŒ–ç»„ä»¶
- **é’±åŒ…é›†æˆ**: æ”¯æŒMetaMaskç­‰Web3é’±åŒ…

### æ ¸å¿ƒæ¦‚å¿µ

1. **åŠ å¯†å­˜å‚¨**: æ—¥è®°å†…å®¹ä½¿ç”¨ `ebytes256` ç±»å‹åŠ å¯†å­˜å‚¨
2. **è®¿é—®æ§åˆ¶**: é€šè¿‡ACLç³»ç»Ÿæ§åˆ¶è§£å¯†æƒé™
3. **ç­¾åç®¡ç†**: ä½¿ç”¨EIP-712ç­¾åè¿›è¡Œè§£å¯†æˆæƒ
4. **Mockç¯å¢ƒ**: å¼€å‘ç¯å¢ƒè‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨Mock FHEVMå®ä¾‹

## è„šæœ¬å‘½ä»¤

### åˆçº¦é¡¹ç›®

```bash
npm run compile    # ç¼–è¯‘åˆçº¦
npm run deploy     # éƒ¨ç½²åˆ°é»˜è®¤ç½‘ç»œ
npm run test       # è¿è¡Œæµ‹è¯•
npm run node       # å¯åŠ¨æœ¬åœ°èŠ‚ç‚¹
```

### å‰ç«¯é¡¹ç›®

```bash
npm run dev:mock   # å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨æ£€æµ‹HardhatèŠ‚ç‚¹ï¼‰
npm run dev        # æ ‡å‡†å¼€å‘æ¨¡å¼
npm run build      # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run genabi     # ç”ŸæˆABIæ–‡ä»¶
```

## æŠ€æœ¯æ ˆ

### æ™ºèƒ½åˆçº¦
- Solidity 0.8.24
- FHEVMåº“
- Hardhatå¼€å‘æ¡†æ¶

### å‰ç«¯
- Next.js 15
- React 19
- TypeScript
- Tailwind CSS
- ethers.js v6
- @zama-fhe/relayer-sdk

## å®‰å…¨æ³¨æ„äº‹é¡¹

1. **ç§é’¥ç®¡ç†**: å‰ç«¯ä»…ä¿å­˜ä¸´æ—¶è§£å¯†ç­¾åï¼Œä¸å­˜å‚¨æ•æ„Ÿç§é’¥
2. **æƒé™æ§åˆ¶**: ä½¿ç”¨æœ€å°æƒé™åŸåˆ™ï¼Œä¼˜å…ˆä½¿ç”¨ä¸´æ—¶æƒé™
3. **æ•°æ®éªŒè¯**: é¿å…åœ¨é“¾ä¸Šæ³„éœ²æ•æ„Ÿä¿¡æ¯
4. **ç­¾åæœ‰æ•ˆæœŸ**: è§£å¯†ç­¾åæœ‰åˆç†çš„æœ‰æ•ˆæœŸé™åˆ¶

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚

## è®¸å¯è¯

MIT License



